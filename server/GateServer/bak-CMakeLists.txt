cmake_minimum_required(VERSION 3.6)
project(GateServer)


set(CMAKE_VERBOSE_MAKEFILE ON)
set(CMAKE_CXX_FLAGS "$ENV{CXXFLAGS} -rdynamic -O0 -ggdb -std=c++17 -Wall -Wno-deprecated -Werror -Wno-unused-function -Wno-builtin-macro-redefined")

set(SRCS
    src/message.grpc.pb.cc
    src/message.pb.cc
    src/gate_server.cc
    src/http_connection.cc
    src/logic_system.cc
    src/config_mgr.cc
    src/main.cc
    )

# message("============"${abseil_cpp_LIBRARIES})
# foreach(item ${abseil_cpp_LIBRARIES})
#    message("${item}")
# endforeach()
# message("============")

include_directories(. src)
# 添加包含目录（通常gRPC的CMake模块会自动处理这些）
include_directories(${Protobuf_INCLUDE_DIRS} ${gRPC_INCLUDE_DIRS})

link_directories("/usr/local/lib")

set(LIBS 
    jsoncpp
    boost_filesystem
    gRPC::grpc++_reflection
    gRPC::grpc++
    protobuf::libprotobuf
    pthread
)

add_executable(GateServer ${SRCS})
target_link_libraries(GateServer ${LIBS})

set(EXECUTABLE_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/bin)
